# Calculet API

components:
  requestBodies:
    postCalculet:
      description: 계산기 정보
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/calculet"
  parameters:
    calculetId:
      in: path
      required: true
      name: calculetId
      schema:
        $ref: "#/components/schemas/calculetId"
  responses:
    likeResult:
      content:
        application/json:
          schema:
            type: object
            properties:
              likeCnt:
                type: integer
                description: 요청 수행 완료 후 계산기의 좋아요 수
    bookmarkResult:
      content:
        application/json:
          schema:
            type: object
            properties:
              bookmarkCnt:
                type: integer
                description: 요청 수행 완료 후 계산기의 좋아요 수
    getCalculetInfo:
      description: 계산기 불러오기 성공
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/calculet"
            properties:
              id:
                $ref: "#/components/schemas/calculetId"
              createdAt:
                $ref: "#/components/schemas/createdAt"
              contributor:
                $ref: "#/components/schemas/userSimpleInfo"
              statistics:
                $ref: "#/components/schemas/statistics"
              userCalculet:
                $ref: "#/components/schemas/userCalculet"
    getCalculetList:
      description: 계산기 목록 (아래 스키마는 계산기 하나 미리보기)
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/calculetPreview"
    postCalculet:
      description: 계산기 등록 완료 -> 루트로 디라이렉션
      content:
        application/json:
          schema:
            type: string
            description: post 요청 후 리다이렉션 될 경로
            example: "/"
    bookMarkList:
      description: 북마크 리스트
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  $ref: "#/components/schemas/calculetId"
                title:
                  $ref: "#/components/schemas/calculet/properties/title"
    updateLogList:
      description: 업데이트 로그 배열
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/updateLog"
  schemas:
    userCalculet:
      type: object
      properties:
        liked:
          type: boolean
          description: 유저의 좋아요 여부 (로그인 안한 경우 false)
        bookmarked:
          type: boolean
          description: 유저의 북마크 여부 (로그인 안한 경우 false)
    calculet:
      type: object
      properties:
        title:
          type: string
          description: 계산기 이름
          example: "테스트 계산기"
        srcCode:
          type: string
          description: 계산기 코드
          example: "<html>hello world</html>"
        manual:
          type: string
          description: 계산기 설명 마크다운
          example: "### hello, world"
        description:
          type: string
          description: 계산기 한 줄 설명
          example: "이 계산기에 대한 한 줄 설명"
        categoryMainId:
          type: integer
          description: 카테고리 대분류
          example: 1
        categorySubId:
          type: integer
          description: 카테고리 소분류
    calculetId:
      type: string
      description: 계산기 UUID
      example: 9dc33a8f-7647-4598-ac0b-2d1089c89404
    statistics:
      type: object
      properties:
        bookmark:
          type: integer
          description: 북마크 횟수
        like:
          type: integer
          description: 좋아요 횟수
        report:
          type: integer
          description: 신고 횟수
        view:
          type: integer
          description: 누적 접속 수
        user:
          type: integer
          description: 사용자 수
        calculation:
          type: integer
          description: 누적 계산 횟수
    calculetPreview:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/calculetId"
        title:
          $ref: "#/components/schemas/calculet/properties/title"
        description:
          $ref: "#/components/schemas/calculet/properties/description"
        categoryMainId:
          $ref: "#/components/schemas/calculet/properties/categoryMainId"
        categorySubId:
          $ref: "#/components/schemas/calculet/properties/categorySubId"
        viewCnt:
          $ref: "#/components/schemas/statistics/properties/view"
        contributor:
          $ref: "#/components/schemas/userSimpleInfo"
    createdAt:
      type: string
      description: 계산기 등록 시간
      example: "2023-01-16 21:23:25"
      format: date-time
    updateLog:
      type: object
      properties:
        calculetId:
          $ref: "#/components/schemas/calculetId"
        message:
          type: string
          description: 업데이트 메세지
          example: 업데이트 로그
